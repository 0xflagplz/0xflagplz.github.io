<!DOCTYPE html  PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'  'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'><html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>cdn</title>
</head><body><tt><b><span style="font-size: 16pt">CDN - </span></b><a href="https://en.wikipedia.org/wiki/Content_delivery_network">Content delivery network</a> <span style="font-size: 16pt"><b><br/>
</b></span><span style="font-size: 16pt"><b><br/>
</b></span><b><span style="font-size: 24pt">CDN Redirectors  </span></b><ul><span style="font-size: 18pt"><li style="list-style-type: none">- use valid SSL certificate</li>
</span><li style="list-style-type: none"><ul><li style="list-style-type: none"><i><span style="font-size: 14pt">~often time the CDN requires one</span></i></li>
</ul>
</li>
</ul>
<span style="font-size: 18pt">- Allow HTTP POST and HTTP GET verbs</span><ul><span style="font-size: 18pt"><li style="list-style-type: none">- Consider HTTP-GET only C2</li>
<li style="list-style-type: none">- Disable all cache options </li>
</span><li style="list-style-type: none"><ul><li style="list-style-type: none"><span style="font-size: 14pt"><i>~ giving a better chance to redirect to your cobalt server</i></span></li>
</ul>
</li>
<span style="font-size: 18pt"><li style="list-style-type: none">- be aware of transformed requests</li>
</span><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><i><span style="font-size: 14pt"><li style="list-style-type: none">~ <b>Cloudfront</b>likes to rearrange the cookie value</li>
<li style="list-style-type: none">~ if youre beacon <b>Malleable c2 profile</b>is using the cookie header to send data back to cobalt strike</li>
</span></i><li style="list-style-type: none"><i><span style="font-size: 14pt">~ possible to break <b>contract</b>between Malleable c2 profile the beacon payload and the beacon controller</span></i></li>
</ul>
</li>
</ul>
</li>
</ul>
<br/>
<br/>
<br/>
<br/>
<span style="font-size: 16pt"><b>multiple different origin servers Per CDN</b></span><ul><span style="font-size: 16pt"><li style="list-style-type: none">some of the origin servers are highly trusted</li>
</span><li style="list-style-type: none"><span style="font-size: 16pt">we can become a customer too ;)</span></li>
</ul>
<br/>
<u><b><span style="font-size: 18pt">What is an Origin Server?</span></b></u><ul><span style="font-size: 14pt"><li style="list-style-type: none">the CDN receives a client from so call &quot;client&quot;</li>
<li style="list-style-type: none">if the CDN analyzes to see if it has the correct response in the cache</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none"><b>IF IT DOESNT</b></li>
</ul>
</li>
<li style="list-style-type: none">The CDN will reach out to the customer server in order to pull the content</li>
<li style="list-style-type: none">it then adds the info into the cache</li>
</span></ul>
<img height="317" src="image.png" width="700"/><br/>
<br/>
<span style="font-size: 16pt">SETUP TO NOT CACHE</span><ul><span style="font-size: 14pt"><li style="list-style-type: none">we need every request to reach us</li>
</span><li style="list-style-type: none"><span style="font-size: 14pt">caching &quot;remembers&quot; and will fuck us bc we dont want it to</span></li>
</ul>
<img height="401" src="image 2.png" width="550"/><br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
</tt></body></html>